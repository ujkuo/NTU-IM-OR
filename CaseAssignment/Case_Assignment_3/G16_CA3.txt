param S; #shift i:14 kinds
param T; #time period j:24 `ours
param D; #day k:31 days
param I; #csr h:40 csrs

#demand matrix: pth period for day j-----------------------------------------------------------
param Demand{j in 1..T, k in 1..D}; 

#shift arrangement: pth period and kth shift---------------------------------------------------
param C{j in 1..T, i in 1..S}; 



#difference between CSRs on shift: kth shift pth period----------------------------------------
var x{i in 1..S, k in 1..D, h in 1..40}binary;
#difference between shift assignment and day: ith CSR, jth day, kth shift
var w{j in 1..T, k in 1..D}; #difference between demand and supply

#minimize labor shortage ij--------------------------------------------------------------------
minimize labor_shortage:sum{j in 1..T, k in 1..D}w[j,k];



#constraints-----------------------------------------------------------------------------------
# w_jk constraint
subject to w_nonneg1{j in 1..T, k in 1..D}:w[j,k] >= Demand[j,k]-sum{i in 1..S}(C[j,i]*sum{h in 1..I}x[i,k,h]);
subject to w_nonneg2{j in 1..T, k in 1..D}:w[j,k] >= 0;

#every csr is assigned to one shift
subject to p_1{k in 1..D, h in 1..I}:sum{i in 1..S}x[i,k,h] == 1;
#every csr needs eight day-off
subject to shift_0{h in 1..I}: sum{k in 1..D}x[14,k,h] == 8; 


#manager limits
subject to 1{k in {1,15,29}}: sum{h in 14..16, i in 11..13}x[i,k,h]+sum{h in 34..40, i in 11..13}x[i,k,h]>=1;
subject to 2{k in {10}}: sum{h in 14..16, i in 11..13}x[i,k,h]+sum{h in 34..40, i in 11..13}x[i,k,h]>=2;
subject to 3{k in {22}}: sum{h in 14..16, i in 7..10}x[i,k,h]>=1;


#shift requests
subject to drew: x[5,10,6] == 1;
subject to jackson: x[6,17,38] == 1;
subject to willy: x[13,24,2] == 1;


#leave requests
subject to cory1: x[14,1,34] == 1;
subject to cory2: x[14,2,34] == 1;
subject to cory3: x[14,3,34] == 1;
subject to geogina: x[14,3,17] == 1;
subject to justice: x[14,14,13] == 1;
subject to richard: x[14,15,39] == 1;
subject to jackson1: x[14,19,38] == 1;
subject to jackson2: x[14,20,38] == 1;
subject to frankie: x[14,20,21] == 1;
subject to sam: x[14,31,36] == 1;


#time limits
subject to night_limit{k in 1..D-6, h in 1..I}: sum{i in 11..13}(x[i,k,h]+x[i,k+1,h]+x[i,k+2,h]+x[i,k+3,h]+x[i,k+4,h]+x[i,k+5,h]+x[i,k+6,h])<=1;
subject to afternoon_limit{k in 1..D-6, h in 1..I}: sum{i in 7..10}(x[i,k,h]+x[i,k+1,h]+x[i,k+2,h]+x[i,k+3,h]+x[i,k+4,h]+x[i,k+5,h]+x[i,k+6,h])<=2;
subject to shift_0_limit{k in 1..D-6, h in 1..I}: x[14,k,h]+x[14,k+1,h]+x[14,k+2,h]+x[14,k+3,h]+x[14,k+4,h]+x[14,k+5,h]+x[14,k+6,h]>=1;

==============================================================================================
param S := 14;
param T := 24;
param D := 31;
param I := 40;

param Demand :
	1	2	3	4	5	6	7	8	9	10	11	12	13	14	15	16	17	18	19	20	21	22	23	24	25	26	27	28	29	30	31 :=
1	29	20	21	29	20	21	17	29	20	21	17	18	17	18	29	20	21	17	18	29	20	29	20	21	17	18	17	18	29	20	29
2	24	20	18	24	20	18	18	24	20	18	18	15	18	15	24	20	18	18	15	24	20	24	20	18	18	15	18	15	24	20	24
3	25	21	20	25	21	20	17	25	21	20	17	20	17	20	25	21	20	17	20	25	21	25	21	20	17	20	17	20	25	21	25
4	24	22	20	24	22	20	18	24	22	20	18	18	18	18	24	22	20	18	18	24	22	24	22	20	18	18	18	18	24	22	24
5	24	19	22	24	19	22	20	24	19	22	20	16	20	16	24	19	22	20	16	24	19	24	19	22	20	16	20	16	24	19	24
6	24	18	19	24	18	19	17	24	18	19	17	20	17	20	24	18	19	17	20	24	18	24	18	19	17	20	17	20	24	18	24
7	17	12	13	17	12	13	12	17	12	13	12	12	12	12	17	12	13	12	12	17	12	17	12	13	12	12	12	12	17	12	17
8	13	14	11	13	14	11	12	13	14	11	12	11	12	11	13	14	11	12	11	13	14	13	14	11	12	11	12	11	13	14	13
9	17	14	14	17	14	14	11	17	14	14	11	13	11	13	17	14	14	11	13	17	14	17	14	14	11	13	11	13	17	14	17
10	23	18	17	23	18	17	15	23	18	17	15	17	15	17	23	18	17	15	17	23	18	23	18	17	15	17	15	17	23	18	23
11	21	20	20	21	20	20	18	21	20	20	18	17	18	17	21	20	20	18	17	21	20	21	20	20	18	17	18	17	21	20	21
12	23	20	21	23	20	21	17	23	20	21	17	18	17	18	23	20	21	17	18	23	20	23	20	21	17	18	17	18	23	20	23
13	21	18	18	21	18	18	16	21	18	18	16	16	16	16	21	18	18	16	16	21	18	21	18	18	16	16	16	16	21	18	21
14	18	20	18	18	20	18	17	18	20	18	17	18	17	18	18	20	18	17	18	18	20	18	20	18	17	18	17	18	18	20	18
15	20	17	17	20	17	17	14	20	17	17	14	17	14	17	20	17	17	14	17	20	17	20	17	17	14	17	14	17	20	17	20
16	20	17	15	20	17	15	15	20	17	15	15	13	15	13	20	17	15	15	13	20	17	20	17	15	15	13	15	13	20	17	20
17	16	11	15	16	11	15	13	16	11	15	13	14	13	14	16	11	15	13	14	16	11	16	11	15	13	14	13	14	16	11	16
18	11	11	13	11	11	13	11	11	11	13	11	10	11	10	11	11	13	11	10	11	11	11	11	13	11	10	11	10	11	11	11
19	10	8	8	10	8	8	9	10	8	8	9	6	9	6	10	8	8	9	6	10	8	10	8	8	9	6	9	6	10	8	10
20	8	8	6	8	8	6	7	8	8	6	7	6	7	6	8	8	6	7	6	8	8	8	8	6	7	6	7	6	8	8	8
21	8	9	6	8	9	6	8	8	9	6	8	6	8	6	8	9	6	8	6	8	9	8	9	6	8	6	8	6	8	9	8
22	8	8	8	8	8	8	7	8	8	8	7	5	7	5	8	8	8	7	5	8	8	8	8	8	7	5	7	5	8	8	8
23	9	8	7	9	8	7	7	9	8	7	7	6	7	6	9	8	7	7	6	9	8	9	8	7	7	6	7	6	9	8	9
24	8	7	6	8	7	6	6	8	7	6	6	6	6	6	8	7	6	6	6	8	7	8	7	6	6	6	6	6	8	7	8;

param C :
	1	2	3	4	5	6	7	8	9	10	11	12	13	14 :=
1	1	1	1	1	1	0	1	1	1	1	1	1	0	0
2	1	1	1	1	1	0	1	1	1	1	1	1	0	0
3	1	1	1	1	1	0	1	1	1	1	1	1	0	0
4	1	1	1	1	1	0	1	1	1	1	1	1	0	0
5	1	1	1	1	1	0	1	1	1	1	1	1	0	0
6	1	1	1	1	1	0	1	1	1	1	0	1	0	0
7	0	1	1	1	1	0	0	1	1	1	0	0	0	0
8	0	0	1	1	0	0	0	0	1	1	1	0	1	0
9	1	0	0	1	0	0	1	0	0	1	1	1	1	0
10	1	1	0	0	0	1	1	1	0	0	1	1	1	0
11	1	1	1	0	0	1	1	1	1	0	1	1	1	0
12	1	1	1	1	0	1	1	1	1	1	1	1	1	0
13	1	1	1	1	0	1	1	1	1	1	1	1	1	0
14	1	1	1	1	0	1	1	1	1	1	1	1	1	0
15	1	1	1	1	0	1	1	1	1	1	1	1	1	0
16	1	1	1	1	0	1	1	1	1	1	0	1	0	0
17	1	1	1	1	0	1	1	1	1	1	0	0	0	0
18	0	0	0	0	0	0	1	1	1	1	1	0	1	0
19	0	0	0	0	0	0	1	1	1	1	1	1	1	0
20	0	0	0	0	0	0	0	0	0	0	1	1	1	0
21	0	0	0	0	0	0	0	0	0	0	1	1	1	0
22	0	0	0	0	0	0	0	0	0	0	1	1	1	0
23	0	0	0	0	0	0	0	0	0	0	1	1	1	0
24	0	0	0	0	0	0	0	0	0	0	1	1	1	0;
